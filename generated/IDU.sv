// Generated by CIRCT firtool-1.114.1
module IDU(
  input  [31:0] io_in_pc,
                io_in_inst,
  output [4:0]  io_rs1_addr,
                io_rs2_addr,
  input  [31:0] io_rs1_data,
                io_rs2_data,
  output [31:0] io_out_pc,
                io_out_rs1_val,
                io_out_rs2_val,
                io_out_imm,
  output [4:0]  io_out_rd_addr,
  output [3:0]  io_out_alu_op,
  output        io_out_alu_src,
                io_out_mem_wen,
                io_out_mem_ren,
                io_out_reg_wen,
                io_out_is_branch,
                io_out_is_jal,
                io_out_is_jalr
);

  wire            is_i_type = io_in_inst[6:0] == 7'h13;
  wire            is_load = io_in_inst[6:0] == 7'h3;
  wire            is_jalr = io_in_inst[6:0] == 7'h67;
  wire            is_store = io_in_inst[6:0] == 7'h23;
  wire            is_branch = io_in_inst[6:0] == 7'h63;
  wire            is_lui = io_in_inst[6:0] == 7'h37;
  wire            is_auipc = io_in_inst[6:0] == 7'h17;
  wire            is_jal = io_in_inst[6:0] == 7'h6F;
  wire            is_r_type = io_in_inst[6:0] == 7'h33;
  wire [7:0][3:0] _GEN =
    {{4'h2},
     {4'h3},
     {{3'h3, io_in_inst[30]}},
     {4'h4},
     {4'h9},
     {4'h8},
     {4'h5},
     {{3'h0, is_r_type & io_in_inst[30]}}};
  assign io_rs1_addr = io_in_inst[19:15];
  assign io_rs2_addr = io_in_inst[24:20];
  assign io_out_pc = io_in_pc;
  assign io_out_rs1_val = io_rs1_data;
  assign io_out_rs2_val = io_rs2_data;
  assign io_out_imm =
    is_jal
      ? {{12{io_in_inst[31]}}, io_in_inst[19:12], io_in_inst[20], io_in_inst[30:21], 1'h0}
      : is_auipc | is_lui
          ? {io_in_inst[31:12], 12'h0}
          : is_branch
              ? {{20{io_in_inst[31]}},
                 io_in_inst[7],
                 io_in_inst[30:25],
                 io_in_inst[11:8],
                 1'h0}
              : is_store
                  ? {{20{io_in_inst[31]}}, io_in_inst[31:25], io_in_inst[11:7]}
                  : is_jalr | is_load | is_i_type
                      ? {{20{io_in_inst[31]}}, io_in_inst[31:20]}
                      : 32'h0;
  assign io_out_rd_addr = io_in_inst[11:7];
  assign io_out_alu_op = is_r_type | is_i_type ? _GEN[io_in_inst[14:12]] : 4'h0;
  assign io_out_alu_src = io_in_inst[6:0] != 7'h33;
  assign io_out_mem_wen = is_store;
  assign io_out_mem_ren = is_load;
  assign io_out_reg_wen =
    is_r_type | is_i_type | is_load | is_jal | is_jalr | is_lui | is_auipc;
  assign io_out_is_branch = is_branch;
  assign io_out_is_jal = is_jal;
  assign io_out_is_jalr = is_jalr;
endmodule

